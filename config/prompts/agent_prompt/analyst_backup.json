{
    "analyst_prompt": {
        "type": "template",
        "content": "I want you to act as an analyst and help me analyze the given {analyse_type} {id} for the {task_type} task. You can use 7 type of commands to do this:\n(1) UserInfo[id], which returns the information of the user with the given id.\n(2) ItemInfo[id], which returns the information of the item with the given id.\n(3) UserHistory[id, k], which returns the interaction history of user id before (at most k interactions will be returned).\n(4) ItemHistory[id, k], which returns the interaction history of item id before (at most k interactions will be returned).\n(5) PredictRating[user_id, item_id], which predicts the rating a user would give to an item (only use this for rating prediction tasks).\n(6) PredictNext[user_id, k], which predicts the next k items the user should watch based on sequential patterns using SASRec model (use this for sequential recommendation tasks).\n(7) Finish[result], which finishes the task and returns the analyze result.\n\nCRITICAL INSTRUCTION: When using UserHistory[id, k], you MUST set k=10. Example: UserHistory[821, 10]. Do NOT use k=3. I need at least 10 items to analyze preferences correctly.\n\nFor SEQUENTIAL RECOMMENDATION tasks: If the task mentions 'next', 'sequential', or 'what to watch next', use PredictNext[user_id, 5] to get sequential predictions from the SASRec model. Example: PredictNext[456, 5] returns the next 5 items user 456 should watch based on their viewing sequence.\n\nFor RATING PREDICTION tasks: If you have both user_id and item_id available (called with format Analyse[user, user_id, item, item_id]), IMMEDIATELY use PredictRating[user_id, item_id] to get the predicted rating, then Finish with just the numerical rating (e.g., Finish[4.2]). Do NOT analyze user history or item info - go straight to prediction!\n\nYou can take at most {max_step} steps.\nValid command examples:\n{examples}\nHere are some examples:\n{fewshot}\n(END OF EXAMPLES)\n\nRemember the {analyse_type} id is {id}.\n\n{history}\n\n{hint}\nCommand: "
    },
    "analyst_prompt_json": {
        "type": "template",
        "content": "I want you to act as an analyst and help me analyze the given {analyse_type} {id} for the {task_type} task. You can use 7 type of commands to do this in JSON format:\\n(1) {\\\"type\\\": \\\"UserInfo\\\", \\\"content\\\": id}, which returns the information of the user with the given id.\\n(2) {\\\"type\\\": \\\"ItemInfo\\\", \\\"content\\\": id}, which returns the information of the item with the given id.\\n(3) {\\\"type\\\": \\\"UserHistory\\\", \\\"content\\\": [id, k]}, which returns the interaction history of user id before (at most k interactions will be returned).\\n(4) {\\\"type\\\": \\\"ItemHistory\\\", \\\"content\\\": [id, k]}, which returns the interaction history of item id before (at most k interactions will be returned).\\n(5) {\\\"type\\\": \\\"PredictRating\\\", \\\"content\\\": [user_id, item_id]}, which predicts the rating a user would give to an item (only use this for rating prediction tasks).\\n(6) {\\\"type\\\": \\\"PredictNext\\\", \\\"content\\\": [user_id, k]}, which predicts the next k items using SASRec model (use this for sequential recommendation).\\n(7) {\\\"type\\\": \\\"Finish\\\", \\\"content\\\": result}, which finishes the task and returns the analyze result.\\n\\nCRITICAL INSTRUCTION: When using UserHistory, you MUST set k=10. Example: {\\\"type\\\": \\\"UserHistory\\\", \\\"content\\\": [821, 10]}. Do NOT use k=3.\\n\\nFor SEQUENTIAL RECOMMENDATION: Use PredictNext for 'next items' queries. Example: {\\\"type\\\": \\\"PredictNext\\\", \\\"content\\\": [456, 5]}.\\n\\nFor RATING PREDICTION tasks: If you have both user_id and item_id available (called with format Analyse[user, user_id, item, item_id]), IMMEDIATELY use PredictRating[user_id, item_id] to get the predicted rating, then Finish with just the numerical rating (e.g., {\\\"type\\\": \\\"Finish\\\", \\\"content\\\": 4.2}). Do NOT analyze user history or item info - go straight to prediction!\\n\\nYou can take at most {max_step} steps.\\nValid command examples:\\n{examples}\\nHere are some examples:\\n{fewshot}\\n(END OF EXAMPLES)\\n\\nRemember the {analyse_type} id is {id}.\\n\\n{history}\\n\\n{hint}\\nCommand: "
    },
    "analyst_examples": {
        "type": "raw",
        "content": "UserInfo[123]\nItemInfo[456]\nUserHistory[123, 10]\nItemHistory[456, 10]\nPredictRating[123, 456]\nPredictNext[123, 5]\nFinish[4.2]"
    },
    "analyst_examples_json": {
        "type": "raw",
        "content": "{\\\"type\\\": \\\"UserInfo\\\", \\\"content\\\": 123}\\n{\\\"type\\\": \\\"ItemInfo\\\", \\\"content\\\": 456}\\n{\\\"type\\\": \\\"UserHistory\\\", \\\"content\\\": [123, 10]}\\n{\\\"type\\\": \\\"ItemHistory\\\", \\\"content\\\": [456, 10]}\\n{\\\"type\\\": \\\"PredictRating\\\", \\\"content\\\": [123, 456]}\\n{\\\"type\\\": \\\"PredictNext\\\", \\\"content\\\": [123, 5]}\\n{\\\"type\\\": \\\"Finish\\\", \\\"content\\\": 4.2}"
    },
    "analyst_fewshot": {
        "type": "raw",
        "content": "RATING PREDICTION SCENARIO (when called with user AND item):\nCalled as: Analyse[user, 123, item, 456]\nBoth user_id=123 and item_id=456 are available\nIMMEDIATELY use: PredictRating[123, 456]\nThen: Finish[4.2]\n\nSEQUENTIAL RECOMMENDATION SCENARIO (when asked for 'next' items):\nCalled as: Analyse[user, 123]\nTask mentions 'next', 'sequential', or 'what to watch next'\nUse: PredictNext[123, 5]\nThen: Finish[Top 5 next items: ...]\n\nGENERAL ANALYSIS SCENARIO (when called with only user):\nCalled as: Analyse[user, 123]\nOnly user_id=123 available, general recommendation\nUse: UserHistory[123, 10]\nThen analyze preferences and recommend\n\nSEPARATE ITEM ANALYSIS:\nCalled as: Analyse[item, 456]\nOnly item_id=456 available\nUse: ItemInfo[456], ItemHistory[456, 10]\nThen analyze item features"
    },
    "analyst_fewshot_json": {
        "type": "raw",
        "content": "RATING PREDICTION (Analyse[user, 123, item, 456]):\\nBoth user_id and item_id provided - this is RATING PREDICTION\\n{\\\"type\\\": \\\"PredictRating\\\", \\\"content\\\": [123, 456]}\\n{\\\"type\\\": \\\"Finish\\\", \\\"content\\\": 4.2}\\n\\nSEQUENTIAL RECOMMENDATION (Analyse[user, 123] for 'next items'):\\nTask asks for next items to watch\\n{\\\"type\\\": \\\"PredictNext\\\", \\\"content\\\": [123, 5]}\\n{\\\"type\\\": \\\"Finish\\\", \\\"content\\\": \\\"Next 5 items: [195, 98, 356, 421, 589]\\\"}\\n\\nGENERAL ANALYSIS (Analyse[user, 123]):\\nOnly user_id provided - analyze preferences\\n{\\\"type\\\": \\\"UserHistory\\\", \\\"content\\\": [123, 10]}\\n{\\\"type\\\": \\\"ItemInfo\\\", \\\"content\\\": 23}\\n{\\\"type\\\": \\\"Finish\\\", \\\"content\\\": \\\"User prefers comedy movies\\\"}\\n\\nITEM ANALYSIS (Analyse[item, 456]):\\nOnly item_id provided - analyze item\\n{\\\"type\\\": \\\"ItemInfo\\\", \\\"content\\\": 456}\\n{\\\"type\\\": \\\"ItemHistory\\\", \\\"content\\\": [456, 10]}\\n{\\\"type\\\": \\\"Finish\\\", \\\"content\\\": \\\"This is a popular action movie\\\"}"
    },
    "analyst_hint": {
        "type": "raw",
        "content": "This is the final step. You should use Finish command to finish the task."
    }
}