{
    "analyst_prompt": {
        "type": "template",
        "content": "I want you to act as an analyst and help me analyze the given {analyse_type} {id} for the {task_type} task. You can use 6 type of commands to do this:\n(1) UserInfo[id], which returns the information of the user with the given id.\n(2) ItemInfo[id_or_ids], which returns the information of the item with the given id or list of ids (e.g. ItemInfo[[1, 2, 3]]).\n(3) UserHistory[id, k], which returns the interaction history of user id before (at most k interactions will be returned).\n(4) ItemHistory[id_or_ids, k], which returns the interaction history of item id or list of ids (e.g. ItemHistory[[1, 2, 3], 10]).\n(5) PredictRating[user_id, item_id], which predicts the rating a user would give to an item using Matrix Factorization model (only use this for rating prediction tasks).\n(6) Finish[result], which finishes the task and returns the analyze result.\n\nCRITICAL INSTRUCTION: When using UserHistory[id, k], you MUST set k=10. Example: UserHistory[821, 10]. Do NOT use k=3. I need at least 10 items to analyze preferences correctly.\n\nCRITICAL: When using Finish[result], the 'result' must be a DETAILED and CONVINCING analysis BASED ON REAL DATA ONLY. Respond in the SAME LANGUAGE as the user's input. Do not INVENT or ASSUME genres - you MUST use ItemInfo to get ACTUAL genre information for high/low rated items. NEVER make up genre preferences!\n\nFor RATING PREDICTION tasks: If you have both user_id and item_id available (called with format Analyse[user, user_id, item, item_id]), IMMEDIATELY use PredictRating[user_id, item_id] to get the predicted rating, then Finish with just the numerical rating (e.g., Finish[4.2]). Do NOT analyze user history or item info - go straight to prediction!\n\nFor GENERAL ANALYSIS tasks: FIRST use UserHistory[id, 10] to get item IDs and ratings, THEN use ItemInfo on those specific high/low rated items to get their REAL genres, THEN analyze patterns. Example workflow: UserHistory[123, 10] → ItemInfo[high_rated_items] → ItemInfo[low_rated_items] → analyze actual genre patterns.\n\nFor ITEM ANALYSIS: Do NOT use UserInfo to look up users who interacted with the item. Focus ONLY on the item's features (ItemInfo) and the ratings it received (ItemHistory). Analyzing random users is a waste of steps.\n\nFor BATCH ANALYSIS: If you are asked to analyze multiple items (e.g. Analyse[item, [1, 2, 3]]), use batch commands like ItemInfo[[1, 2, 3]] and ItemHistory[[1, 2, 3], 10] to get information for all items at once. This is much more efficient.\n\nYou can take at most {max_step} steps.\nValid command examples:\n{examples}\nHere are some examples:\n{fewshot}\n(END OF EXAMPLES)\n\nRemember the {analyse_type} id is {id}.\n\n{history}\n\n{hint}\nCommand: "
    },
    "analyst_prompt_json": {
        "type": "template",
        "content": "I want you to act as an analyst and help me analyze the given {analyse_type} {id} for the {task_type} task. You can use 6 type of commands to do this in JSON format:\\n(1) {{\\\"type\\\": \\\"UserInfo\\\", \\\"content\\\": id}}, which returns the information of the user with the given id.\\n(2) {{\\\"type\\\": \\\"ItemInfo\\\", \\\"content\\\": id_or_ids}}, which returns the information of the item with the given id or list of ids.\\n(3) {{\\\"type\\\": \\\"UserHistory\\\", \\\"content\\\": [id, k]}}, which returns the interaction history of user id before (at most k interactions will be returned).\\n(4) {{\\\"type\\\": \\\"ItemHistory\\\", \\\"content\\\": [id_or_ids, k]}}, which returns the interaction history of item id or list of ids.\\n(5) {{\\\"type\\\": \\\"PredictRating\\\", \\\"content\\\": [user_id, item_id]}}, which predicts the rating a user would give to an item (only use this for rating prediction tasks).\\n(6) {{\\\"type\\\": \\\"Finish\\\", \\\"content\\\": result}}, which finishes the task and returns the analyze result.\\n\\nCRITICAL INSTRUCTION: When using UserHistory, you MUST set k=10. Example: {{\\\"type\\\": \\\"UserHistory\\\", \\\"content\\\": [821, 10]}}. Do NOT use k=3.\\n\\nCRITICAL: When using Finish, the 'content' must be a DETAILED and CONVINCING analysis. Respond in the SAME LANGUAGE as the user's input (if user asks in Vietnamese, respond in Vietnamese; if English, respond in English). Do not just list facts. Explain the reasoning behind your conclusion. Connect the user's history (genres, high ratings) to the item's features. If the user has mixed ratings for similar items, explain why. Your analysis should be persuasive.\\n\\nFor RATING PREDICTION tasks: If you have both user_id and item_id available (called with format Analyse[user, user_id, item, item_id]), IMMEDIATELY use PredictRating[user_id, item_id] to get the predicted rating, then Finish with just the numerical rating (e.g., {{\\\"type\\\": \\\"Finish\\\", \\\"content\\\": 4.2}}). Do NOT analyze user history or item info - go straight to prediction!\\n\\nFor GENERAL ANALYSIS: Use UserHistory to understand preferences, avoid unnecessary ItemInfo calls.\\n\\nFor ITEM ANALYSIS: Do NOT use UserInfo to look up users who interacted with the item. Focus ONLY on the item's features (ItemInfo) and the ratings it received (ItemHistory).\\n\\nFor BATCH ANALYSIS: If you are asked to analyze multiple items, use batch commands like {{\\\"type\\\": \\\"ItemInfo\\\", \\\"content\\\": [1, 2, 3]}}.\\n\\nYou can take at most {max_step} steps.\\nValid command examples:\\n{examples}\\nHere are some examples:\\n{fewshot}\\n(END OF EXAMPLES)\\n\\nRemember the {analyse_type} id is {id}.\\n\\n{history}\\n\\n{hint}\\nCommand: "
    },
    "analyst_examples": {
        "type": "raw",
        "content": "UserInfo[123]\nItemInfo[456]\nItemInfo[[456, 789]]\nUserHistory[123, 10]\nItemHistory[456, 10]\nItemHistory[[456, 789], 10]\nPredictRating[123, 456]\nFinish[4.2]"
    },
    "analyst_examples_json": {
        "type": "raw",
        "content": "{{\\\"type\\\": \\\"UserInfo\\\", \\\"content\\\": 123}}\\n{{\\\"type\\\": \\\"ItemInfo\\\", \\\"content\\\": 456}}\\n{{\\\"type\\\": \\\"ItemInfo\\\", \\\"content\\\": [456, 789]}}\\n{{\\\"type\\\": \\\"UserHistory\\\", \\\"content\\\": [123, 10]}}\\n{{\\\"type\\\": \\\"ItemHistory\\\", \\\"content\\\": [456, 10]}}\\n{{\\\"type\\\": \\\"ItemHistory\\\", \\\"content\\\": [[456, 789], 10]}}\\n{{\\\"type\\\": \\\"PredictRating\\\", \\\"content\\\": [123, 456]}}\\n{{\\\"type\\\": \\\"Finish\\\", \\\"content\\\": 4.2}}"
    },
    "analyst_fewshot": {
        "type": "raw",
        "content": "RATING PREDICTION SCENARIO (when called with user AND item):\nCalled as: Analyse[user, 123, item, 456]\nBoth user_id=123 and item_id=456 are available\nIMMEDIATELY use: PredictRating[123, 456]\nThen: Finish[4.2]\nTotal: 2 steps ✅ EFFICIENT!\n\nGENERAL ANALYSIS SCENARIO (when called with only user):\nCalled as: Analyse[user, 123]\nOnly user_id=123 available\nStep 1: UserHistory[123, 10] (get rated items)\nStep 2: ItemInfo[high_rated_item_ids] (get REAL genres)\nStep 3: Finish[Analysis based on actual genres: User prefers Drama based on high ratings for Drama genre films]\nTotal: 3 steps ✅ ACCURATE!\n\nSEPARATE ITEM ANALYSIS:\nCalled as: Analyse[item, 456]\nOnly item_id=456 available\nUse: ItemInfo[456]\nThen analyze item features and Finish[Popular Animation movie]\nTotal: 2 steps ✅ EFFICIENT!"
    },
    "analyst_fewshot_json": {
        "type": "raw",
        "content": "RATING PREDICTION (Analyse[user, 123, item, 456]):\\nBoth user_id and item_id provided - this is RATING PREDICTION\\n{{\\\"type\\\": \\\"PredictRating\\\", \\\"content\\\": [123, 456]}}\\n{{\\\"type\\\": \\\"Finish\\\", \\\"content\\\": 4.2}}\\n\\nGENERAL ANALYSIS (Analyse[user, 123]):\\nOnly user_id provided - analyze preferences\\n{{\\\"type\\\": \\\"UserHistory\\\", \\\"content\\\": [123, 10]}}\\n{{\\\"type\\\": \\\"Finish\\\", \\\"content\\\": \\\"User prefers Action and Sci-Fi movies\\\"}}\\n\\nITEM ANALYSIS (Analyse[item, 456]):\\nOnly item_id provided - analyze item\\n{{\\\"type\\\": \\\"ItemInfo\\\", \\\"content\\\": 456}}\\n{{\\\"type\\\": \\\"Finish\\\", \\\"content\\\": \\\"Popular Animation movie\\\"}}"
    },
    "analyst_hint": {
        "type": "raw",
        "content": "This is the final step. You should use Finish command to finish the task."
    }
}